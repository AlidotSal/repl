{"name":"9-custom-directive-actions-onmount","files":[{"name":"App.html","body":"<script>\n    let colors = ['red', 'blue', 'green', 'deeppink', 'brown'];\n    let list = [\n        {name: 'Linux', n: 0},\n        {name: 'MacOS', n: 1},\n        {name: 'Windows', n: 2},\n        {name: 'Ubuntu', n: 3},\n        {name: 'FreeBSD', n: 4}\n    ];\n\n    let div;\n\n    const color = (element, item, n) => {\n        // on mount action\n        function inc() {item.n++;}\n        element.addEventListener('click', inc);\n        element.style.color = colors[n];\n\n        return {\n        \n        // on update action\n        update: (item, n) => {\n            if(n < colors.length) {\n            element.style.color = colors[n];\n            div.style.backgroundColor = colors[n];\n            }\n            else list.splice(list.indexOf(item), 1);\n        },\n        \n        // on destroy action\n        destroy: () => {\n            element.removeEventListener('click', inc);\n        }\n        }\n    }\n\n    function onMount() {\n        // on mount component\n    }\n</script>\n\n<div use={div=$element}>Run code from html, e.g. save element into variable</div>\n\n<ul style=\"cursor: pointer; user-select: none;\">\n    {#each list as it}\n        <li use:color={it, it.n}>{it.name} - {it.n}</li>\n    {/each}\n</ul>"}]}