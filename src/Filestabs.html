<script>
    import {files} from './stores/files.js';

    let list = [];
    let current = 'App.html';

    files.list.subscribe(files => {
        list = files;
    });

    files.current.subscribe(file => {
        current = file.name;
    });

    function addFile(){
        let name = 'Comp';
        let num = ''
        while(list.includes(`${name}${num}.html`)){
            num = num ? ++num : 2;
        }
        name = `${name}${num}.html`;
        files.add(name);
        files.current.set(name);
    }
</script>

<div class="filestabs">
    {#each list as tab}
    <button 
        class:active={current===tab} 
        @click={files.current.set(tab)} 
        @dblclick={console.log('doubleclicked')} 
        title="./{tab}. Double-click to edit">{tab}
    </button>
    {/each}
    <button class="add" title="Add component" @click={addFile()}>+</button>
</div>

<style>
    .filestabs{
        height: 30px;
        background-color: var(--color-gray);
    }
    .filestabs button{
        height: 30px;
        min-width: 80px;
        border: none;
        background-color: var(--color-light);
        border-radius: 3px 3px 0px 0px;
        cursor: pointer;
    }

    .filestabs button.active{
        background-color: var(--hl-background);
    }
    .filestabs button.add{
        background-color: var(--color-gray);
        color: var(--color-lightest);
        font-weight: bold;
        font-size: 20px;
        line-height: 20px;
        min-width: 30px;
    }
</style>